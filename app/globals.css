@tailwind base;
@tailwind components;
@tailwind utilities;

:root {
  --foreground-rgb: 0, 0, 0;
  --background-start-rgb: 214, 219, 220;
  --background-end-rgb: 255, 255, 255;
}

@media (prefers-color-scheme: dark) {
  :root {
    --foreground-rgb: 255, 255, 255;
    --background-start-rgb: 0, 0, 0;
    --background-end-rgb: 0, 0, 0;
  }
}

@layer base {
  :root {
    /* Main palette from Tailwind and page usage */
    --background: 222 23% 97%; /* gray-50 */
    --foreground: 220 14% 13%; /* gray-900 */
    --card: 0 0% 100%; /* white */
    --card-foreground: 220 14% 13%; /* gray-900 */
    --popover: 0 0% 100%;
    --popover-foreground: 220 14% 13%;
    --primary: 333 81% 52%; /* pink-500 */
    --primary-foreground: 0 0% 100%;
    --secondary: 262 52% 47%; /* purple-500 */
    --secondary-foreground: 0 0% 100%;
    --accent: 192 100% 67%; /* cyan-400 */
    --accent-foreground: 0 0% 100%;
    --muted: 0 0% 96.1%;
    --muted-foreground: 0 0% 45.1%;
    --destructive: 0 84% 60%;
    --destructive-foreground: 0 0% 100%;
    --border: 220 14% 90%; /* gray-200 */
    --input: 220 14% 90%;
    --ring: 333 81% 52%; /* pink-500 */
    --radius: 0.75rem;
    /* Gradients for header, badge, etc */
    --gradient-pink: linear-gradient(90deg, #ec4899 0%, #a78bfa 100%);
    --gradient-purple: linear-gradient(90deg, #a78bfa 0%, #06b6d4 100%);
    --gradient-yellow: linear-gradient(90deg, #fbbf24 0%, #f59e42 100%);
  }
  .dark {
    --background: 222 47% 11%; /* gray-900 */
    --foreground: 0 0% 100%; /* white */
    --card: 215 28% 17%; /* gray-800 */
    --card-foreground: 0 0% 100%;
    --popover: 215 28% 17%;
    --popover-foreground: 0 0% 100%;
    --primary: 333 81% 52%; /* pink-500 */
    --primary-foreground: 0 0% 100%;
    --secondary: 262 52% 47%; /* purple-500 */
    --secondary-foreground: 0 0% 100%;
    --accent: 192 100% 67%; /* cyan-400 */
    --accent-foreground: 0 0% 100%;
    --muted: 220 14% 20%; /* gray-700 */
    --muted-foreground: 220 14% 60%; /* gray-500 */
    --destructive: 0 84% 60%;
    --destructive-foreground: 0 0% 100%;
    --border: 220 14% 30%; /* gray-700 */
    --input: 220 14% 30%;
    --ring: 333 81% 52%; /* pink-500 */
    --radius: 0.75rem;
    --gradient-pink: linear-gradient(90deg, #ec4899 0%, #a78bfa 100%);
    --gradient-purple: linear-gradient(90deg, #a78bfa 0%, #06b6d4 100%);
    --gradient-yellow: linear-gradient(90deg, #fbbf24 0%, #f59e42 100%);
  }
}

@layer base {
  * {
    @apply border-border;
  }
  body {
    @apply bg-background text-foreground;
  }
}

.safe-area-bottom {
  padding-bottom: env(safe-area-inset-bottom);
}

@keyframes progress {
  0% {
    width: 0%;
    opacity: 0.8;
  }
  50% {
    width: 70%;
    opacity: 1;
  }
  100% {
    width: 100%;
    opacity: 0.8;
  }
}

.animate-progress {
  animation: progress 2s ease-in-out infinite;
}

.markdown ol {
  @apply list-decimal pl-6;
}

.markdown ul {
  @apply list-disc pl-6;
}

.markdown p code {
  @apply rounded-sm bg-muted px-1 text-yellow-600;
}

/* Celebration Modal Animations */
@keyframes float {
  0%, 100% {
    transform: translateY(0) rotate(0deg);
    opacity: 0.7;
  }
  50% {
    transform: translateY(-20px) rotate(180deg);
    opacity: 1;
  }
}

@keyframes bounce-slow {
  0%, 100% {
    transform: translateY(0);
  }
  50% {
    transform: translateY(-10px);
  }
}

.animate-float {
  animation: float 3s ease-in-out infinite;
}

.animate-bounce-slow {
  animation: bounce-slow 2s ease-in-out infinite;
}

/* Comprehensive fix for Radix Dialog body padding issue */
/* This prevents the layout shift when dialog opens */

/* Force body to never have padding-right */
body {
  padding-right: 0 !important;
}

/* Prevent any inline styles from adding padding */
body[style] {
  padding-right: 0 !important;
}

/* Target Radix's scroll lock */
body[data-scroll-locked] {
  padding-right: 0 !important;
  margin-right: 0 !important;
  overflow: hidden !important;
}

/* Ensure all direct children of body don't shift */
body > * {
  padding-right: 0 !important;
}

/* Override any padding on specific elements */
aside,
nav,
header,
main {
  padding-right: 0 !important;
  margin-right: 0 !important;
}

/* FIX: Prevent sidebar from being affected by scroll lock */
/* Force sidebar to stay at viewport top when modal opens */
body[data-scroll-locked] aside {
  position: fixed !important;
  top: 0 !important;
  left: 0 !important;
  height: 100vh !important;
  overflow-y: auto !important;
  z-index: 40 !important;
}

/* Compensate for fixed sidebar by adding margin to main content */
@media (min-width: 768px) {
  /* Push main content to the right when sidebar becomes fixed */
  body[data-scroll-locked] main {
    margin-left: 16rem !important; /* Default expanded sidebar width */
  }
  
  /* Adjust for collapsed sidebar */
  body[data-scroll-locked]:has(aside[class*="w-16"]) main {
    margin-left: 4rem !important; /* Collapsed sidebar width */
  }
}
